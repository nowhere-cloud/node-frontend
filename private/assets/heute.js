"use strict";!function(i){var o=i("p#uuid").html().trim(),t="",a=i("<span/>").addClass("text-danger"),n=function(){i.get("../api/vm/"+o+"/metrics").done(function(o){"Success"===o.Status?(i("#modal-metric-osname").html(o.Value.os_version.name),i("#modal-metric-kernel").html(o.Value.os_version.uname),i("#modal-metric-driver").html(o.Value.PV_drivers_version.major+"."+o.Value.PV_drivers_version.minor+"."+o.Value.PV_drivers_version.micro+" build "+o.Value.PV_drivers_version.build),i("#modal-ip-ipv4").html(o.Value.networks["0/ip"]),i("#modal-ip-ipv6").html(o.Value.networks["0/ipv6/0"]),"Running"!==i("dd#pstate").html()&&i("#modal-ip-alert").show()):(a.html("Contact Administrator: "+o.ErrorDescription).addClass("col-sm-12"),i("#modal-metric-main").html(a),i("#modal-ip-main").html(a))}).fail(function(o){a.html(o.status+" "+o.statusText),i("#modal-metric-main").html(a),i("#modal-ip-main").html(a)})},e=function(){i("#managed-tool").load("./"+o+"/toolbar",function(o,t,n){"error"===t&&(a.html(n.status+" "+n.statusText),i(this).html(a))})},l=function(t,a,n){i.ajax({type:"POST",url:"../api/vm/"+o+"/send",data:{_csrf:n,action:t,payload:a},success:function(o,t,a){console.log(o),i("#confirmation-loading").hide(),i("#confirmation-field-rsvp-etktid").html(o.uuid),i("#confirmation-modal").data("bs.modal").handleUpdate(),i("#confirmation-field-rsvp").show()},dataType:"json"})};i(document).ready(function(){i("#modal-ip-alert").hide(),i("#confirmation-loading").hide(),i("#confirmation-field-rsvp").hide(),setTimeout(function(){e()},2e3),setTimeout(function(){n()},3e3)}),i("#refresh").on("click",function(){i("#modal-ip-alert").hide(),n()}),i("#managed-tool").on("click",".vm-actions",function(){t=i(this).data("action"),i("#confirmation-field-uuid").html(o),i("#confirmation-field-verb").html(babel("action",t)),i("#confirmation-modal").modal("show")}),i("#confirmation-confirm").on("click",function(){l(t,{},i(this).data("csrf")),i("#confirmation-loading").show(),i(this).hide(),i("#confirmation-modal").data("bs.modal").handleUpdate()})}(jQuery);