"use strict";!function(t){var o=t("p#uuid").html().trim(),a="",e=t("<span/>").addClass("text-danger"),i=function(){t.get("../api/vm/"+o+"/metrics").done(function(o){"Success"===o.Status?(t("#modal-metric-osname").html(o.Value.os_version.name),t("#modal-metric-kernel").html(o.Value.os_version.uname),t("#modal-metric-driver").html(o.Value.PV_drivers_version.major+"."+o.Value.PV_drivers_version.minor+"."+o.Value.PV_drivers_version.micro+" build "+o.Value.PV_drivers_version.build),t("#modal-ip-ipv4").html(o.Value.networks["0/ip"]),t("#modal-ip-ipv6").html(o.Value.networks["0/ipv6/0"]),"Running"!==t("dd#pstate").html()&&t("#modal-ip-alert").show()):(e.html("Contact Administrator: "+o.ErrorDescription).addClass("col-sm-12"),t("#modal-metric-main").html(e),t("#modal-ip-main").html(e))}).fail(function(o){e.html(o.status+" "+o.statusText),t("#modal-metric-main").html(e),t("#modal-ip-main").html(e)})},n=function(){t.get("../api/vm/"+o+"/pstate").done(function(o){"Success"===o.Status?(t("#pstate").html(o.Value.power_state),t.each(o.Value.allowed_operations,function(o,a){switch(a){case"start":t('[data-action="set.vm.power_on"]').show();break;case"hard_shutdown":t('[data-action="set.vm.power_off"]').show();break;case"hard_reboot":t('[data-action="set.vm.power_reboot"]').show();break;case"suspend":t('[data-action="set.vm.power_suspend"]').show();break;case"resume":t('[data-action="set.vm.power_resume"]').show();break;case"clone":t('[data-action="do.vm.clone"]').show();break;case"destroy":t('[data-action="do.vm.destroy"]').show()}})):(e.html("Contact Administrator: "+o.ErrorDescription),t("#pstate").html(e))}).fail(function(o){e.html(o.status+" "+o.statusText),t("#pstate").html(e)})},s=function(a,e,i){t.ajax({type:"POST",url:"../api/vm/"+o+"/send",data:{_csrf:i,action:a,payload:e},success:function(o,a,e){t("#confirmation-loading").hide(),t("#confirmation-field-rsvp-etktid").html(o.task),t("#confirmation-field-rsvp").show(),setTimeout(function(){t("#confirmation-modal").modal("hide"),t(".vm-actions").hide()},1e4)},dataType:"json"})};t(document).ready(function(){setTimeout(function(){n()},1e3),setTimeout(function(){i()},1500)}),t("#refresh").on("click",function(){t("#modal-ip-alert").hide(),setTimeout(function(){t(".vm-actions").hide(),n()},1e3),setTimeout(function(){i()},2e3)}),t("#managed-tool").on("click",".vm-actions",function(){a=t(this).data("action"),t("#confirmation-field-uuid").html(o),t("#confirmation-field-verb").html(babel("action",a)),"do.vm.clone"===a?window.location.href="clone?t="+o:t("#confirmation-modal").modal("show")}),t("#confirmation-confirm").on("click",function(){s(a,{},t(this).data("csrf")),t("#confirmation-loading").show(),t(this).hide()})}(jQuery);