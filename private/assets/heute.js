"use strict";!function(t){var i=t("p#uuid").html().trim(),o="",a=t("<span/>").addClass("text-danger"),n=function(){t.get("../api/vm/"+i+"/metrics").done(function(i){"Success"===i.Status?(t("#modal-metric-osname").html(i.Value.os_version.name),t("#modal-metric-kernel").html(i.Value.os_version.uname),t("#modal-metric-driver").html(i.Value.PV_drivers_version.major+"."+i.Value.PV_drivers_version.minor+"."+i.Value.PV_drivers_version.micro+" build "+i.Value.PV_drivers_version.build),t("#modal-ip-ipv4").html(i.Value.networks["0/ip"]),t("#modal-ip-ipv6").html(i.Value.networks["0/ipv6/0"]),"Running"!==t("dd#pstate").html()&&t("#modal-ip-alert").show()):(a.html("Contact Administrator: "+i.ErrorDescription).addClass("col-sm-12"),t("#modal-metric-main").html(a),t("#modal-ip-main").html(a))}).fail(function(i){a.html(i.status+" "+i.statusText),t("#modal-metric-main").html(a),t("#modal-ip-main").html(a)})},e=function(){t.get("../api/vm/"+i+"/pstate").done(function(i){"Success"===i.Status?t("#pstate").html(i.power_state):(a.html("Contact Administrator: "+i.ErrorDescription),t("#pstate").html(a))}).fail(function(i){a.html(i.status+" "+i.statusText),t("#pstate").html(a)})},m=function(){t("#managed-tool").load("./"+i+"/toolbar",function(i,o,n){"error"===o&&(a.html(n.status+" "+n.statusText),t(this).html(a))})},s=function(o,a,n){t.ajax({type:"POST",url:"../api/vm/"+i+"/send",data:{_csrf:n,action:o,payload:a},success:function(i,o,a){t("#confirmation-loading").hide(),t("#confirmation-field-rsvp-etktid").html(i.task),t("#confirmation-field-rsvp").show()},dataType:"json"})};t(document).ready(function(){t("#modal-ip-alert").hide(),t("#confirmation-loading").hide(),t("#confirmation-field-rsvp").hide(),setTimeout(function(){m()},1e3),setTimeout(function(){n()},1500)}),t("#refresh").on("click",function(){t("#modal-ip-alert").hide(),n(),m(),e()}),t("#managed-tool").on("click",".vm-actions",function(){o=t(this).data("action"),t("#confirmation-field-uuid").html(i),t("#confirmation-field-verb").html(babel("action",o)),t("#confirmation-modal").modal("show")}),t("#confirmation-confirm").on("click",function(){s(o,{},t(this).data("csrf")),t("#confirmation-loading").show(),t(this).hide()})}(jQuery);