"use strict";!function(t){var a=t("p#uuid").html().trim(),o="",e=t("<span/>").addClass("text-danger"),i=function(){t.get("../api/vm/"+a+"/metrics").done(function(a){"Success"===a.Status?(t("#modal-metric-osname").html(a.Value.os_version.name),t("#modal-metric-kernel").html(a.Value.os_version.uname),t("#modal-metric-driver").html(a.Value.PV_drivers_version.major+"."+a.Value.PV_drivers_version.minor+"."+a.Value.PV_drivers_version.micro+" build "+a.Value.PV_drivers_version.build),t("#modal-ip-ipv4").html(a.Value.networks["0/ip"]),t("#modal-ip-ipv6").html(a.Value.networks["0/ipv6/0"]),"Running"!==t("dd#pstate").html()&&t("#modal-ip-alert").show()):(e.html("Contact Administrator: "+a.ErrorDescription).addClass("col-sm-12"),t("#modal-metric-main").html(e),t("#modal-ip-main").html(e))}).fail(function(a){e.html(a.status+" "+a.statusText),t("#modal-metric-main").html(e),t("#modal-ip-main").html(e)})},n=function(){t.get("../api/vm/"+a+"/pstate").done(function(a){"Success"===a.Status?(t("#pstate").html(a.Value.power_state),t.each(a.Value.allowed_operations,function(a,o){switch(o){case"start":t('[data-action="set.vm.power_on"]').show();break;case"hard_shutdown":t('[data-action="set.vm.power_off"]').show();break;case"hard_reboot":t('[data-action="set.vm.power_reboot"]').show();break;case"suspend":t('[data-action="set.vm.power_suspend"]').show();break;case"resume":t('[data-action="set.vm.power_resume"]').show();break;case"clone":t('[data-action="do.vm.clone"]').show();break;case"destroy":t('[data-action="do.vm.destroy"]').show()}})):(e.html("Contact Administrator: "+a.ErrorDescription),t("#pstate").html(e))}).fail(function(a){e.html(a.status+" "+a.statusText),t("#pstate").html(e)})},s=function(o,e,i){t.ajax({type:"POST",url:"../api/vm/"+a+"/send",data:{_csrf:i,action:o,payload:e},success:function(a,o,e){t("#confirmation-loading").hide(),t("#confirmation-field-rsvp-etktid").html(a.task),t("#confirmation-field-rsvp").show()},dataType:"json"})};t(document).ready(function(){setTimeout(function(){n()},1e3),setTimeout(function(){i()},1500)}),t("#refresh").on("click",function(){t("#modal-ip-alert").hide(),setTimeout(function(){t(".vm-actions").hide(),n()},1e3),setTimeout(function(){i()},2e3)}),t("#managed-tool").on("click",".vm-actions",function(){o=t(this).data("action"),t("#confirmation-field-uuid").html(a),t("#confirmation-field-verb").html(babel("action",o)),t("#confirmation-modal").modal("show")}),t("#confirmation-confirm").on("click",function(){s(o,{},t(this).data("csrf")),t("#confirmation-loading").show(),t(this).hide()})}(jQuery);